<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skien Threads</title>
  <link rel="stylesheet" href="styles.css?v=12">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
  <link rel="manifest" href="favicon_io/site.webmanifest">

  <!-- Grunnleggende info -->
  <title>SkienThreads ‚Äî Anonyme tr√•der fra Skien VGS, Hjalmar og Skogmo</title>
  <meta name="description" content="SkienThreads lar elever fra Skien vgs, Hjalmar Johansen og Skogmo dele tanker anonymt. Post tr√•der, les innlegg og si det du mener, uten press.">
  <meta name="keywords" content="Skien vgs, Hjalmar Johansen, Skogmo, Skien, anonym, forum, skole, tr√•der, elever, innlegg, chat">
  <meta name="author" content="SkienThreads Team">

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico">

  <!-- Open Graph (for deling p√• Discord, Snapchat, Facebook osv.) -->
  <meta property="og:title" content="SkienThreads ‚Äî Anonyme tr√•der fra Skien VGS, Hjalmar og Skogmo">
  <meta property="og:description" content="Et anonymt forum for elever fra Skien vgs, Hjalmar Johansen og Skogmo. Del tanker, historier og meninger fritt.">
  <meta property="og:image" content="https://skienthreads.web.app/preview.jpg">
  <meta property="og:url" content="https://skienthreads.web.app">
  <meta property="og:type" content="website">

  <!-- Twitter Card (for X/Twitter) -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SkienThreads ‚Äî Anonyme tr√•der fra Skien VGS, Hjalmar og Skogmo">
  <meta name="twitter:description" content="Et anonymt forum for elever i Skien. Del tanker og meninger fra Skien vgs, Hjalmar Johansen og Skogmo uten filter.">
  <meta name="twitter:image" content="https://skienthreads.web.app/preview.jpg">

    <script>
    // GitHub Pages SPA redirect
    (function(){
      var redirect = sessionStorage.redirect;
      delete sessionStorage.redirect;
      if (redirect && redirect != location.href) {
        history.replaceState(null, null, redirect);
      }
    })();
  </script>
</head>
<body>
  <!-- ============================================ -->
  <!-- REGISTER SCREEN -->
  <!-- Initial registration form for new users -->
  <!-- ============================================ -->
  <div id="register-screen" class="auth-screen">
    <h2>Registrer deg</h2>

    <form id="register-form">
      <label for="regEmail">Skolemail: </label>
      <input type="email" id="regEmail" name="mail" autocomplete="email" required>
      
      <label for="regName">Brukernavn:</label>
      <input type="text" id="regName" name="username" autocomplete="name" required>

      <label for="regSchool">Velg skole:</label>
      <select class="school-selector" id="regSchool" name="school" required>
          <option>Skien VGS</option>
          <option>Skogmo VGS</option>
          <option>Hjalmar VGS</option>
      </select>
      
      <label for="regPass">Passord:</label>
      <input type="password" id="regPass" name="password" autocomplete="new-password" required>
      <div class="terms-row">
        <input type="checkbox" id="termsCheck" name="terms" required>
        <label for="termsCheck" class="terms-label">Jeg aksepterer</label>
        <span id="show-terms" role="button" tabindex="0" class="terms-link">vilk√•rene</span>
      </div>

      <div id="termsText" class="terms-text hidden" aria-hidden="true">
        <p>Ved registrering lagrer vi e-postadressen din i Firebase Authentication for verifisering og innlogging. Passord h√•ndteres og lagres sikkert av Firebase (ikke i klartekst). E‚Äëpost kan v√¶re tilgjengelig for systemadministrasjon ved behov; offentlige visninger viser kun brukernavn/tilknyttet skole. Kontakt skienthreads@hotmail.com for sp√∏rsm√•l eller sletting av data.</p>
      </div>

      <button type="submit" id="registerBtn">Registrer</button>
    </form>

    <div>
      <p class="auth-toggle">Allerede registrert? <span id="go-to-login" class="link">Logg inn her</span></p>
    </div>
  </div>

  <!-- Inline simple terms paragraph (hidden by default) -->


  <!-- ============================================ -->
  <!-- LOGIN SCREEN -->
  <!-- Login form for existing users -->
  <!-- ============================================ -->
  <div id="login-screen" class="auth-screen hidden">
    <h2>Logg inn</h2>

    <form id="login-form">
      <label for="loginEmail">Skolemail: </label>
      <input type="email" id="loginEmail" name="mail" autocomplete="email" required>
      
      <label for="loginPass">Passord:</label>
      <input type="password" id="loginPass" name="password" autocomplete="current-password" required>
      
      <button type="submit" id="loginBtn">Logg inn</button>
    </form>
    
    <p class="auth-toggle">Har du ikke en konto? <span id="go-to-register" class="link">Registrer deg her</span></p>
  </div>

  <!-- ============================================ -->
  <!-- MAIN PAGE - NAVIGATION BAR -->
  <!-- Sticky header with logo, tabs, school selector, and profile -->
  <!-- ============================================ -->
  <nav id="main-page" class="navbar hidden">
    <div class="nav-container" id="navbar">
      <!-- Logo/Brand -->
      <div class="logo" id="logo">SkienThreads</div>
      
      <!-- Feed Filter Tabs (Recent/Popular) -->
      <div class="feed-tabs">
        <button class="tab-btn active" id="nylig">Nylig</button>
        <button class="tab-btn" id="popular">Popul√¶rt</button>
        <button class="tab-btn" id="hot">Hot</button>
      </div>
      
      <!-- Right side actions -->
      <div class="nav-actions">
        <!-- School filter dropdown -->
        <select class="school-selector" id="schoolFilter">
          <option>Alle skoler</option>
          <option>Skien VGS</option>
          <option>Skogmo VGS</option>
          <option>Hjalmar VGS</option>
        </select>
        
        <!-- Notification bell button -->
        <button class="notification-btn" id="notificationBtn" aria-label="Varsler">
          üîî
          <span class="notification-badge hidden" id="notificationBadge">0</span>
        </button>
        
        <!-- User profile button (shows initials) + dropdown -->
        <div class="profile-wrapper">
          <button id="profileBtn" class="profile-btn initials" aria-haspopup="true" aria-expanded="false">xx</button>
          <div id="profileMenu" class="profile-menu hidden" role="menu" aria-labelledby="profileBtn">
            <button class="profile-menu-item" role="menuitem" data-action="profile" disabled><s>Min profil (kommmer senere)</s></button>
            <button class="profile-menu-item" role="menuitem" data-action="settings" disabled><s>Innstillinger (kommer senere)</s></button>
            <div class="profile-menu-sep" aria-hidden="true"></div>
            <button class="profile-menu-item" id="log" role="menuitem" data-action="loggut()">Logg ut</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Notification dropdown panel -->
    <div class="notification-panel hidden" id="notificationPanel">
      <div class="notification-header">
        <h3>Varsler</h3>
        <button class="mark-all-read" id="markAllRead">Merk alle som lest</button>
      </div>
      <div class="notification-list" id="notificationList">
        <!-- Notifications will be inserted here -->
      </div>
    </div>
  </nav>

  <!-- ============================================ -->
  <!-- MAIN CONTENT CONTAINER -->
  <!-- Two-column layout: Feed + Sidebar -->
  <!-- ============================================ -->
  <div id="main-content" class="main-container hidden">
    
    <!-- ============================================ -->
    <!-- LEFT COLUMN: FEED SECTION -->
    <!-- Contains create thread box and thread cards -->
    <!-- ============================================ -->
    <div class="feed-section">
      
      <!-- CREATE NEW THREAD BOX -->
       <form id="post-thread">
          <div class="create-thread">
            <div class="create-thread-input">
              <!-- User avatar (shows initials) -->
              <div class="user-avatar initials">JD</div>
              <!-- Text input for new thread -->
              <textarea placeholder="Hva tenker du p√•?" required id="thread-content"></textarea>
              <!-- Add after textarea -->
              <div id="poll-section" class="poll-section" style="margin-top: 12px; padding: 12px; border: 1px solid var(--border); border-radius: 8px;">
  <label><input type="checkbox" id="poll-toggle"> Legg til Poll</label>
  <div id="poll-form" class="hidden" style="margin-top: 8px;">
    <input type="text" id="poll-question" placeholder="Poll question?" style="width: 100%; margin-bottom: 8px;">
    <div id="poll-options">
      <div class="poll-option"><input type="text" placeholder="Option 1"></div>
      <div class="poll-option"><input type="text" placeholder="Option 2"></div>
    </div>
    <button type="button" id="add-option" class="btn btn-secondary" style="margin-top: 4px;">+ Add Option</button>
  </div>
</div>
            </div>
                <div class="create-thread-actions">
                    <button class="btn btn-primary" id="post-thread-btn" type="submit">Publiser</button>
                </div>
          </div>
        </form>

      <!-- ============================================ -->
      <!-- THREAD CARD 1 -->
      <!-- ============================================ -->
      
      <div id="Threads" class="Threads">
        ingenting her.....
      </div>
    </div>

    <!-- ============================================ -->
    <!-- RIGHT COLUMN: SIDEBAR -->
    <!-- Contains trending topics and school stats -->
    <!-- ============================================ -->
    <aside class="sidebar">
      
      <!-- TRENDING TOPICS CARD -->
      <div class="sidebar-card" id="popular-hashtags">
        <h3 class="sidebar-title">Popul√¶rt n√•</h3>
        <!-- Trending topic items -->
        <div class="trending-item">
          <div class="trending-topic">#MatteEksamen</div>
          <div class="trending-count">156 tr√•der</div>
        </div>
        <div class="trending-item">
          <div class="trending-topic">#H√∏stferie</div>
          <div class="trending-count">89 tr√•der</div>
        </div>
        <div class="trending-item">
          <div class="trending-topic">#Russetreff</div>
          <div class="trending-count">124 tr√•der</div>
        </div>
        <div class="trending-item">
          <div class="trending-topic">#Skolelag</div>
          <div class="trending-count">67 tr√•der</div>
        </div>
      </div>

      <!-- ACTIVE SCHOOLS CARD -->
      <div class="sidebar-card" id="online-counter">
        <h3 class="sidebar-title">Aktive skoler</h3>
        <!-- School activity stats -->
        <div class="school-info">
          <span class="school-name">Skien VGS</span>
          <span class="school-count">234 online</span>
        </div>
        <div class="school-info">
          <span class="school-name">Skogmo VGS</span>
          <span class="school-count">189 online</span>
        </div>
        <div class="school-info">
          <span class="school-name">Hjalmar VGS</span>
          <span class="school-count">156 online</span>
        </div>
      </div>
    </aside>
  </div>


  <!-- ============================================ -->
  <!-- FOOTER -->
<footer class="footer" id="footer">
  <div class="footer-content">
    <div class="footer-contact">
      <span class="footer-contact-label">Contact:</span>
      <a href="mailto:skienthreads@hotmail.com" class="footer-email">skienthreads@hotmail.com</a>
    </div>
    <div class="footer-copyright">
      ¬© 2025 skienThreads. All rights reserved.
    </div>
  </div>
</footer>

  <script type="module" src="utils.js?v=12"></script>
  <script type="module" src="app.js?v=18"></script>
</body>
</html>